<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="todolist.css">
</head>
<body>
    <div>
        <div id="todo_textbox" class="container-xl ms-3 mt-5">        
            <input id="task"  type="text" class="form-control-lg shadow row container-fluid" placeholder="Add a task">
            <input onclick="addTask()" id="submit" type="submit" class="btn btn-outline-primary btn-sm row mt-2" disabled >
        </div>
        <div class="container-fluid mt-3">
            <ul id="taskList" class="list-group">
                <div class="row ms-1 mb-3" id="1">
                    <li id="hi" class="list-group-item col-9 rounded shadow d-inline-flex">
                        <input type="checkbox" class="form-check-input me-3">
                        <div>hi how are you my man i am</div>
                    </li>
                    <div class="btn-group col-auto">
                        <button class="btn btn-outline-danger btn-sm col-auto deleteBtn">delete</button>
                    </div>
                </div>
            </ul>
        </div>
    </div>
    <script>
        let counter = 0
        function addTask() {
            const task = document.querySelector("#task");
            const taskList = document.querySelector("#taskList");
            const listItemParent = document.createElement("div");
            const listItem = document.createElement("li");
            const taskTextElement = document.createElement('div');
            const btnParent = document.createElement("div")
            const deleteBtn = document.createElement("button");
            const doneBtn = document.createElement("button");


            // every list item's parent
            listItemParent.classList.add("row", "ms-1", "mb-3");
            counter++;
            listItemParent.setAttribute("id", counter);
            taskList.append(listItemParent);




            // the list item (the task)
            listItem.classList.add("list-group-item", "col-9", "rounded", "shadow", "d-inline-flex");
            listItemParent.append(listItem);

            // the done checkbox
            doneCheck = document.createElement("input")
            doneCheck.setAttribute('type', 'checkbox')
            doneCheck.classList.add("form-check-input", "me-3", "doneBtn")
            listItem.append(doneCheck)

            // the task text
            taskTextElement.innerHTML = task.value;
            taskTextElement.classList.add('taskText')
            listItem.append(taskTextElement)


            // parent for the buttons(done, delete)
            btnParent.classList.add("btn-group", "col-auto");
            listItemParent.append(btnParent);

            deleteBtn.innerText = "delete";
            deleteBtn.classList.add("btn", "btn-outline-danger", "btn-sm", "col-auto", "deleteBtn");
            btnParent.append(deleteBtn);

            task.value = "";
            document.querySelector("#submit").disabled = true; 
        }    

        // submitting using the Enter key
        document.addEventListener("DOMContentLoaded", ()=> {
            document.addEventListener("keydown", (e)=> {
                if (e.key === "Enter") {
                    addTask();
                }
            })
        })

        // code to not submit the task when the input feild is empty
        document.addEventListener("DOMContentLoaded", ()=> {
            document.querySelector("#task").addEventListener("keydown", ()=> {
                document.querySelector("#submit").disabled = false;
                })
            })

        // making the delete button work
        const taskList = document.getElementById("taskList")
        taskList.addEventListener('click', (e) => {
            if(e.target.classList.contains('deleteBtn')) {
                 let parOfparOfDel = e.target.parentNode.parentNode;
                 parOfparOfDel.remove();
            }
        });

        //making the done button work
        taskList.addEventListener('click', (e) => {
            if(e.target.classList.contains('doneBtn')) {
                let taskText = e.target.parentNode.querySelector(".taskText")
                taskText.classList.add("text-decoration-line-through");
                let listItemParent = e.target.parentNode.parentNode
                listItemParent.remove();
                document.getElementById('taskList').append(listItemParent);
                e.target.disabled = true // this line should be change when adding to undo task feature
            }
        });



    </script>
</body>
</html>
